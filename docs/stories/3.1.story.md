---
title: Attendance Management
status: Draft
epic: 3
story: 1
---

# User Story: As a Teacher, I want to track student attendance for my classes. As a Tenant Admin, I want to monitor overall attendance and generate reports.

## Acceptance Criteria:
- The system shall allow a Teacher to take daily/session-based attendance for their classes, marking students as Present, Absent, Late, or Excused.
- The system shall provide an interface for Tenant Admins to view attendance data for the entire school and filter by class, date, or status.
- The system shall automatically send notifications to parents/guardians when a student is marked as absent without a valid reason.
- The system shall allow Tenant Admins to define and customize attendance policies (e.g., grace periods for lateness).
- The system shall generate attendance reports (daily, weekly, monthly) for individual students, classes, or the entire school.
- The system shall ensure that all attendance data is isolated by tenant.
- **The system shall provide dedicated attendance panels for each user role with appropriate functionality and restrictions.**
- **Students shall only view their own attendance records and cannot mark attendance or access other students' data.**
- **Teachers shall only mark attendance for their assigned classes and view attendance data for their students only.**
- **Tenant Admins shall have full access to attendance management, policy configuration, and school-wide reports.**
- **Super Admins shall have system-wide view access to attendance data across all tenants for monitoring purposes.**

## Examples:
- **Daily Attendance Example:** A teacher opens their dashboard, selects the current class, and is presented with a list of students. They can quickly tap to mark each student's attendance status. The system defaults to 'Present' to speed up the process.
- **Automated Notification Example:** A student is marked 'Absent'. If the school has a policy for immediate notification, the system automatically sends an SMS to the student's registered parent/guardian: "Dear Parent, your child, [Student Name], has been marked absent from school today, [Date]. Please contact the school office if you have any questions."

## Potential Obstacles:
- **Real-time Performance:** In a large school, hundreds of teachers might be taking attendance simultaneously. The system must be able to handle these concurrent requests without a significant drop in performance.
- **Integration with Multiple Capture Methods:** While the initial version may focus on manual entry, future integration with biometric scanners, RFID readers, or mobile app check-ins will require a flexible and extensible architecture.
- **Complex Attendance Policies:** Different schools may have very different and complex rules for what constitutes 'Late' vs. 'Absent', or how many 'Excused' absences are allowed per term. The system needs a flexible rule engine to accommodate this.

## Dev Notes:

### Previous Story Insights:
- User & Role Management (Story 1.1) is essential to ensure only authorized teachers can mark attendance and only relevant people can view the data.
- Class Scheduling & Timetable Management (Story 2.2) provides the class context for which attendance is being taken.

### Data Models:
- **AttendanceRecords Table:** To store daily attendance records for each student in each class session.
- **AttendancePolicies Table:** To store tenant-specific attendance rules and notification settings.

## Role-Based Attendance Access Control:

### Super Admin:
- **Access Level**: System-wide read access to attendance data across all tenants
- **Permissions**: 
  - View attendance trends and patterns across all schools
  - Access system-wide attendance reports and analytics
  - Monitor attendance compliance across tenants
- **Restrictions**: Cannot mark attendance or configure policies (delegated to tenant admins)

### Tenant Admin:
- **Access Level**: Full CRUD access within their tenant
- **Permissions**:
  - Configure attendance policies and rules
  - View all attendance data for their school
  - Generate comprehensive attendance reports
  - Manage attendance notifications and alerts
  - Override attendance records when necessary
- **Restrictions**: Cannot access other tenants' attendance data

### Teacher:
- **Access Level**: Mark attendance for assigned classes, view assigned students' data
- **Permissions**:
  - Take daily/session-based attendance for assigned classes
  - View attendance history for their students
  - Access teacher-specific attendance reports
  - Mark students as Present, Absent, Late, or Excused
- **Restrictions**: Cannot view attendance data for students not in their classes or configure policies

### Student:
- **Access Level**: Read-only access to personal attendance records
- **Permissions**:
  - View own attendance history and statistics
  - Access personal attendance reports
  - View attendance-related notifications
- **Restrictions**: Cannot mark attendance, view other students' data, or access administrative functions

## Tasks / Subtasks:
- [x] Task 1 (AC: 1): Implement the interface for teachers to take attendance.
- [x] Task 2 (AC: 2): Implement the dashboard for Tenant Admins to view and filter attendance data.
- [x] Task 3 (AC: 3): Set up the automated notification system for absent students.
- [x] Task 4 (AC: 4): Implement the interface for Tenant Admins to configure attendance policies.
- [x] Task 5 (AC: 5): Develop the functionality to generate various attendance reports.
- [x] Task 6 (AC: 6): Ensure strict tenant isolation for all attendance data and policies.
- [ ] Task 7 (AC: 7): Implement role-based access control for attendance management APIs.
- [ ] Task 8 (AC: 8): Create role-specific attendance dashboard components.
- [ ] Task 9 (AC: 9): Implement comprehensive attendance data filtering based on user roles.
- [ ] Task 10 (Future): Design the architecture to support multiple attendance capture methods.
