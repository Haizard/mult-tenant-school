---
title: Platform Services & Marketplace
status: Draft
epic: 11
story: 1
---

# User Story: As a System Administrator, I want to offer and manage a marketplace of optional, value-added services for my tenants, so that I can create new revenue streams and enhance the platform's value.

## Acceptance Criteria:
- The system shall provide a "Marketplace" interface visible to Tenant Admins where they can browse and subscribe to optional services offered by the System Administrator.
- The System Administrator shall be able to create, manage, and define packages for a variety of services, including but not limited to:
  - **Communication:** A mechanism for the System Admin to send targeted announcements to tenants.
  - **Educational Content:** A repository for selling notes, tutorials, or short lectures.
  - **E-commerce:** A service for ordering school supplies like stationery.
  - **Technical Support:** Services like computer maintenance.
  - **Inter-School Competitions:** A module for managing academic and sports competitions between tenants.
- For each service, the System Admin shall be able to define pricing models (e.g., one-time payment, recurring contract/subscription) and detailed service level agreements.
- Tenant Admins shall be able to subscribe to services, accept agreements, and be billed by the System Administrator through the platform.
- For competitions, the system shall allow Tenant Admins to submit their selected participants (e.g., best students, best players) and for the System Admin to manage the competition and announce results.
- All marketplace activities, subscriptions, and payments shall be tracked and auditable.
- **The system shall provide dedicated marketplace management panels for each user role with appropriate functionality and restrictions.**
- **Students and Teachers shall have no access to marketplace management or system administration functions.**
- **Tenant Admins shall only browse and subscribe to marketplace services, but cannot create or manage services.**
- **Super Admins shall have full access to marketplace management, service creation, billing, and cross-tenant operations.**

## Examples:
- **Competition Subscription:** The System Admin creates an "Annual National Math Competition" service for $100. Tenant Admins from different schools can subscribe, pay the fee, and then get access to a new section in their dashboard to nominate their top 5 students. The System Admin can then manage the competition from a central dashboard.
- **Content Purchase:** A Tenant Admin browses the marketplace and sees a "Physics Form 4 Revision Notes" package for a one-time fee. They purchase it, and the content immediately becomes available for their teachers and students to access.
- **Admin Announcement:** The System Admin wants to announce a planned system-wide update. They use a central communication tool to send a message that appears as a high-priority notification in every Tenant Admin's dashboard.

## Potential Obstacles:
- **Billing and Payment Gateway Integration:** This introduces a second layer of billingâ€”one where the tenants pay the System Admin. This requires a robust payment gateway integration and a clear separation from the school's internal student fee management system.
- **Competition Logic:** Building a fair and engaging competition module is complex. It requires logic for bracketing, scoring, and managing different types of competitions (e.g., academic tests vs. sports tournaments), which are very different.
- **Service Fulfillment and Logistics:** For physical goods like stationery or in-person services like maintenance, the platform can only facilitate the order; the actual fulfillment happens offline. Managing this workflow and customer satisfaction will be a challenge.

## Dev Notes:

### Previous Story Insights:
- This epic introduces a new dimension to the platform, turning it from a pure SaaS into a Platform-as-a-Service (PaaS) with a marketplace.
- It builds on the core Multi-Tenancy (Epic 10) and User Management (Epic 1) stories, as it requires clear identification of tenants and admins.
- It will require a new top-level billing system, distinct from the tenant-level Finance module (Epic 7).

### Data Models:
- **Services Table:** To store the catalog of services offered by the System Admin.
- **ServicePackages Table:** To define the different pricing tiers and features for each service.
- **TenantSubscriptions Table:** To track which tenants have subscribed to which service packages.
- **MarketplaceInvoices Table:** To manage billing from the System Admin to the tenants.
- **Competitions Table:** To manage inter-school competition details.
- **CompetitionParticipants Table:** To store the students/teams submitted by tenants for a competition.

## Role-Based Marketplace Management Access Control:

### Super Admin:
- **Access Level**: Full system-wide access to marketplace management functions
- **Permissions**: 
  - Create, edit, and manage all marketplace services
  - Define pricing models and service level agreements
  - Manage inter-school competitions and results
  - Send targeted announcements to tenants
  - Access system-wide marketplace reports and analytics
  - Manage billing and payment processing
- **Restrictions**: None - full marketplace access

### Tenant Admin:
- **Access Level**: Browse and subscribe to marketplace services
- **Permissions**:
  - Browse available marketplace services
  - Subscribe to services and accept agreements
  - Submit participants for competitions
  - View subscription history and billing
  - Access subscribed services and content
- **Restrictions**: Cannot create or manage services, access other tenants' subscriptions, or system-wide configurations

### Teacher:
- **Access Level**: No access to marketplace management
- **Permissions**: None related to marketplace management
- **Restrictions**: Cannot access any marketplace management or system administration functions

### Student:
- **Access Level**: No access to marketplace management
- **Permissions**: None related to marketplace management
- **Restrictions**: Cannot access any marketplace management or system administration functions

## Tasks / Subtasks:
- [x] Task 1 (AC: 1, 2, 3): Implement the core service catalog management for the System Admin.
- [x] Task 2 (AC: 4): Develop the tenant-facing marketplace UI and the subscription workflow.
- [x] Task 3 (Dev): Integrate a payment gateway for System Admin-to-tenant billing.
- [x] Task 4 (AC: 5): Build the Inter-School Competition management module.
- [x] Task 5 (AC: 2): Implement the Educational Content repository and delivery mechanism.
- [x] Task 6 (AC: 2): Develop the Super Admin-to-tenant announcement/messaging feature.
- [ ] Task 7 (AC: 6): Implement role-based access control for marketplace management APIs.
- [ ] Task 8 (AC: 7): Create role-specific marketplace dashboard components.
- [ ] Task 9 (AC: 8): Implement comprehensive marketplace data filtering based on user roles.
